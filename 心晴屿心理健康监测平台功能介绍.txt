# 心晴屿心理健康监测平台功能介绍

## 一、应用概述

"心晴屿"是一款集脑机接口技术、情绪分析和音乐疗愈于一体的现代化心理健康监测与干预平台。该平台通过脑电信号采集与分析，实时监测用户的情绪状态和注意力水平，提供个性化的情绪管理方案、音乐疗愈体验和专业的心理健康报告，旨在帮助用户提升心理健康水平、改善情绪状态并增强注意力能力。

## 二、技术架构

### 1. 核心框架与开发工具
- **前端框架**：React + React Router
- **状态管理**：React Context API (AuthContext)
- **UI组件**：自定义设计的响应式组件系统
- **样式方案**：CSS模块化设计

### 2. 数据可视化
- **图表库**：Chart.js，用于实现情绪曲线、注意力指数、脑波数据等各类可视化图表
- **特殊可视化**：情绪词云、情绪星云图等创新视觉呈现方式

### 3. 音频处理
- **音频上下文**：Web Audio API，实现复杂的音频生成和处理
- **音乐合成**：振荡器、滤波器、增益节点等实现多音色合成
- **音色模拟**：小提琴、钢琴、长笛等多种乐器音色模拟

### 4. 数据存储
- **本地存储**：localStorage，用于存储用户分类信息、情绪记录、同意状态等
- **会话管理**：基于路由的用户状态管理

### 5. 界面设计
- **响应式布局**：适配不同设备屏幕尺寸
- **现代化UI**：简洁直观的用户界面，强调用户体验
- **交互设计**：直观的操作流程和清晰的视觉反馈

### 6. 项目结构
- **模块化组织**：按功能模块划分代码结构
- **页面组件**：位于`src/ui/pages/`目录下的功能页面组件
- **上下文管理**：位于`src/core/contexts/`目录下的状态管理

### 7. 安全与隐私
- **隐私保护**：完整的个人信息保护承诺机制
- **数据处理规范**：遵循最小必要原则收集和处理用户数据

## 三、功能模块详解

### 1. 用户系统模块

#### 1.1 登录系统
- **功能概述**：提供安全的用户身份验证机制，确保用户账户安全和数据隐私
- **实现细节**：
  - 基于手机号的登录认证系统，支持密码验证
  - 完整的错误处理机制，包括账号或密码错误提示
  - 登录状态持久化管理，确保用户体验的连贯性
  - 登录成功后自动跳转到心情记录页面，引导用户开始记录情绪
  - 提供忘记密码和注册入口，完善用户引导流程
- **用户交互流程**：用户输入手机号和密码 → 系统验证 → 验证通过进入主页或提示错误信息
- **核心文件**：`LoginPage.jsx`

#### 1.2 注册系统
- **功能概述**：允许新用户创建个人账户，开始使用平台服务
- **实现细节**：
  - 手机号格式验证，确保输入有效性
  - 密码强度验证，包含长度、复杂度要求
  - 确认密码机制，防止输入错误
  - 表单状态实时管理，提供即时反馈
  - 注册成功后自动跳转到登录页面，引导用户登录
- **用户交互流程**：用户填写注册信息 → 系统验证表单有效性 → 创建账户 → 提示成功并跳转登录
- **核心文件**：`RegisterPage.jsx`

#### 1.3 用户分类
- **功能概述**：收集用户基本信息和使用目的，为个性化服务提供数据基础
- **实现细节**：
  - 性别选择（男/女）
  - 年龄输入与数字验证
  - 职业信息收集
  - 使用目的分类（自我提升/症状管理），用于后续服务定制
  - 表单提交前的完整性验证
  - 用户分类信息本地存储，用于个性化推荐
  - 完成后自动跳转到情绪日志页面
- **用户交互流程**：用户填写个人信息 → 选择使用目的 → 提交分类信息 → 进入主功能区
- **核心文件**：`UserClassificationPage.jsx`

#### 1.4 隐私保护同意
- **功能概述**：确保用户充分了解平台数据处理政策，保障用户数据权益
- **实现细节**：
  - 完整的个人信息保护承诺书展示，包含信息收集范围、使用规则、存储与保护、共享与披露限制等七大章节
  - 明确的用户同意/不同意机制
  - 同意状态本地存储，避免重复提示
  - 不同意时清除登录状态并返回登录页，严格遵守用户选择
- **法律合规性**：遵循《中华人民共和国个人信息保护法》《网络安全法》《数据安全法》等相关法律法规
- **用户交互流程**：用户阅读隐私政策 → 选择同意/不同意 → 系统根据选择执行相应操作
- **核心文件**：`ConsentFormPage.jsx`

### 2. 情绪记录与管理模块

#### 2.1 情绪日志
- **功能概述**：提供便捷的情绪记录功能，帮助用户建立情绪追踪习惯
- **实现细节**：
  - 多样化情绪选项：愉悦、平静、专注、放松、紧张、焦虑等
  - 情绪强度评估滑块
  - 自定义标签系统，便于后续分类查询
  - 日期与时间戳自动记录
  - 本地存储管理，确保数据持久化
  - 提供实时心情和心情轨迹两种查看模式
- **用户交互流程**：用户选择当前情绪 → 设置情绪强度 → 添加自定义标签 → 保存记录
- **核心文件**：`RecordPage.jsx`

#### 2.2 情绪日历
- **功能概述**：通过直观的日历视图展示历史情绪记录，帮助用户识别情绪模式
- **实现细节**：
  - 完整的日历界面，支持月份切换
  - 基于日期的情绪记录标记系统
  - 情绪类型对应的颜色编码（愉悦-红色、平静-青色、专注-蓝色等）
  - 历史情绪数据查询功能
  - 点击日期查看详细情绪记录和标签
  - 标签系统支持多种类型：工作、学习、休息、社交、家庭、运动等
- **用户交互流程**：用户浏览日历 → 查看日期标记 → 点击日期查看详细记录
- **核心文件**：`EmotionCalendarPage.jsx`

#### 2.3 情绪云分析
- **功能概述**：通过创新的词云可视化技术展示用户情绪关键词分布
- **实现细节**：
  - 情绪关键词提取与权重计算算法
  - 交互式词云展示，支持鼠标悬停查看详情
  - 基于情绪强度的词大小动态变化
  - 自定义颜色方案，提升视觉体验
  - 支持情绪词频分析和趋势识别
- **用户交互流程**：系统生成情绪词云 → 用户直观查看关键词分布 → 识别主要情绪倾向
- **核心文件**：`EmotionAnalysisPage.jsx`

### 3. 脑电监测与注意力分析模块

#### 3.1 实时监测
- **功能概述**：实时监测用户的脑电信号、注意力水平和情绪状态
- **实现细节**：
  - 脑电数据实时模拟生成，包括α波、β波等脑电波指标
  - 注意力指数实时计算与动态展示
  - 情绪状态（平静、专注、放松、紧张、焦虑等）动态更新
  - 信号质量监测与反馈系统
  - 记录开始/停止控制功能
  - 基于时间的历史数据点保存（支持最近50个数据点）
  - 情绪状态与颜色映射（平静-青色、专注-蓝色、紧张-橙色等）
- **用户交互流程**：用户开始监测 → 系统实时展示数据 → 用户查看实时指标 → 停止记录
- **核心文件**：`RealTimeMonitoringPage.jsx`

#### 3.2 注意力分析
- **功能概述**：深入分析用户的注意力模式、稳定性和变化趋势
- **实现细节**：
  - 注意力曲线生成算法，支持历史数据回顾
  - 注意力稳定性分析算法，评估注意力持续时间和波动情况
  - 详细的注意力报告自动生成，包含关键指标和建议
  - 多样化的数据可视化图表，如注意力曲线图
  - 支持不同时间维度（日/周/月）的数据查看
- **用户交互流程**：用户选择分析时间范围 → 系统生成注意力报告 → 用户查看分析结果和建议
- **核心文件**：`AttentionAnalysisPage.jsx`

#### 3.3 脑机接口
- **功能概述**：提供脑机接口功能，实现脑电信号的采集、分析和应用
- **实现细节**：
  - EEG数据模拟生成系统
  - 注意力指数计算与动态管理算法
  - 多维度情绪状态监测与分析
  - 信号质量实时评估与反馈
  - 数据记录与导出功能
  - 脑电波可视化展示
- **用户交互流程**：用户连接设备 → 系统采集脑电数据 → 分析处理 → 展示结果和应用
- **核心文件**：`BrainComputerInterfacePage.jsx`

### 4. 音乐疗愈与心理干预模块

#### 4.1 心灵交响曲
- **功能概述**：创新性地将用户脑电波数据转化为个性化音乐，提供独特的音乐疗愈体验
- **实现细节**：
  - Web Audio API音频上下文初始化与管理
  - 脑电波数据实时模拟与处理（α波、β波低频、β波高频）
  - 多音色合成技术：
    - 小提琴音色模拟：使用三角形波振荡器为主，谐波振荡器为辅，结合多频段滤波器实现
    - 钢琴音色模拟：通过动态阈值控制，使用低频音符
    - 长笛音色模拟：使用高频音符实现明亮音色
  - 智能音符选择算法：根据脑波频率和变化值自动选择最接近的音符
  - 高级音量包络设计，模拟真实乐器的音色特性
  - 实时脑电波数据可视化
  - 情绪强度与音乐参数关联，提供个性化体验
- **技术亮点**：
  - 音符频率约束在音乐频率范围内
  - 动态阈值控制，使音乐更加自然
  - 多振荡器协作，实现丰富音色
  - 滤波器参数精确调优，模拟乐器共鸣特性
- **用户交互流程**：用户开启心灵交响曲 → 系统采集脑波数据 → 实时转换为音乐 → 用户聆听个性化音乐
- **核心文件**：`MindSymphonyPage.jsx`

#### 4.2 感知疗法
- **功能概述**：提供综合性的感知疗法方案，包括伸展运动、冥想音频和呼吸训练
- **实现细节**：
  - 压力和注意力水平实时监测
  - 设备连接状态模拟与显示
  - 多样化的伸展建议列表（8种不同伸展动作）：
    1. 颈部放松：缓慢向左右两侧倾斜头部，每个方向保持15秒
    2. 肩部舒展：双肩缓慢向上提起，保持5秒后放松，重复3次
    3. 深呼吸练习：缓慢吸气5秒，屏息2秒，呼气7秒，重复5次
    4. 手腕伸展：伸直手臂，轻轻下拉手指，保持10秒，换另一只手
    5. 眼部放松：闭上双眼，手掌搓热后覆盖在眼睛上，感受温暖1分钟
    6. 坐姿扭转：坐在椅子上，轻轻扭转腰部，保持10秒，换另一侧
    7. 腿部伸展：双脚平放地面，膝盖微屈，身体前倾触碰脚尖10秒
    8. 耸肩放松：肩膀快速上下耸动10次，然后完全放松
  - 专业冥想音频列表（5种不同类型）：
    1. 雨声冥想（15分钟）
    2. 森林鸟鸣（20分钟）
    3. 海洋波浪（30分钟）
    4. 白噪音（45分钟）
    5. 禅意钟声（10分钟）
  - 结构化呼吸训练步骤指导：
    1. 准备：挺直坐姿，放松肩膀（5秒）
    2. 吸气：通过鼻子缓慢吸气4秒
    3. 屏息：保持呼吸2秒
    4. 呼气：通过嘴巴缓慢呼气6秒
    5. 休息：暂停1秒
  - 智能状态监测与自动干预系统：
    - 检测到高压力时自动触发提醒和推荐
    - 检测到注意力下降时提供干预建议
    - 睡眠模式下智能播放白噪音辅助睡眠
- **用户交互流程**：用户选择疗法类型 → 系统提供相应指导 → 用户跟随练习 → 系统监测状态并提供反馈
- **核心文件**：`PerceptualTherapyPage.jsx`

### 5. 数据分析与报告模块

#### 5.1 情绪分析
- **功能概述**：深入分析用户的情绪变化趋势、分布特征和潜在模式
- **实现细节**：
  - 情绪曲线数据生成与可视化，支持24小时时间维度
  - 情绪词云分析，直观展示关键词分布
  - 情绪星云图创新可视化，使用不同颜色代表不同情绪类型
  - 多维度情绪数据对比分析
  - 情绪强度热力图展示
  - 情绪变化频率统计
- **可视化技术**：
  - 使用Chart.js实现情绪曲线图表
  - 自定义词云组件，支持字体大小和颜色映射
  - 动态生成的情绪星云图，每个点代表一个情绪数据
- **用户交互流程**：用户选择分析维度 → 系统生成相应图表 → 用户查看分析结果 → 获取情绪洞察
- **核心文件**：`EmotionAnalysisPage.jsx`

#### 5.2 历史记录
- **功能概述**：提供全面的历史情绪和注意力数据查询、统计与分析
- **实现细节**：
  - 支持日视图、周视图、月视图等多维度数据展示
  - 智能模拟历史数据生成，确保数据连贯性
  - 情绪类型与颜色映射系统（愉悦-红色、平静-青色、专注-蓝色等）
  - 多样化的可视化图表：
    - 情绪分布饼图
    - 注意力指数趋势图
    - 情绪变化折线图
  - 数据筛选和搜索功能
  - 关键指标摘要展示
- **用户交互流程**：用户选择时间范围和视图类型 → 系统加载历史数据 → 展示统计图表 → 用户查看和分析历史数据
- **核心文件**：`HistoryRecordsPage.jsx`

#### 5.3 专业报告
- **功能概述**：生成全面、专业的心理健康分析报告，提供个性化建议
- **实现细节**：
  - 多维度数据自动汇总与分析算法
  - 情绪和注意力趋势识别
  - 个性化改善建议生成系统
  - 报告导出和分享功能
  - 关键指标评分系统
- **报告内容**：
  - 情绪状态概览
  - 注意力表现分析
  - 主要情绪模式识别
  - 潜在压力源分析
  - 个性化改善建议
  - 长期趋势预测
- **用户交互流程**：用户请求生成报告 → 系统分析历史数据 → 生成完整报告 → 用户查看并获取建议
- **相关文件**：应用分析相关页面

### 6. 导航与分析中心

#### 6.1 欢迎页面
- **功能概述**：提供平台介绍和功能入口，引导新用户快速了解平台
- **实现细节**：
  - 平台核心功能简要介绍
  - 关键功能模块图标展示
  - 清晰的登录/注册入口
  - 简洁美观的视觉设计
- **用户交互流程**：新用户访问 → 了解平台功能 → 选择登录或注册
- **核心文件**：`WelcomePage.jsx`

#### 6.2 分析导航
- **功能概述**：作为情绪解读和分析功能的中央导航中心
- **实现细节**：
  - 情绪洞察功能入口，提供情绪分析服务
  - 专注探索功能入口，提供注意力分析服务
  - 脑波探索功能入口，提供脑电波分析服务
  - 心晴报告功能入口，提供综合健康报告
- **用户交互流程**：用户进入分析中心 → 选择感兴趣的分析类型 → 进入相应分析页面
- **核心文件**：`AnalysisPage.jsx`

#### 6.3 全局导航系统
- **功能概述**：提供贯穿整个应用的统一导航结构
- **实现细节**：
  - 底部导航栏，包含四大核心功能入口：
    1. 记录：心情记录和情绪管理
    2. 分析：情绪解读和数据统计
    3. 工具：音乐疗愈和感知疗法
    4. 我的：个人中心和设置
  - 响应式导航设计，适配不同设备
  - 当前页面状态高亮显示
- **用户交互流程**：用户通过底部导航栏在不同功能模块间切换
- **相关文件**：应用主框架组件

## 四、技术特色与应用价值

### 1. 技术特色
- **响应式设计**：应用采用响应式布局，适配从手机到桌面的各种设备尺寸，确保用户在不同设备上都能获得一致的体验
- **实时数据处理**：实现了高效的脑电数据模拟和实时分析算法，能够在客户端快速处理和可视化复杂数据
- **创新数据可视化**：不仅使用传统图表，还开发了情绪词云、情绪星云图等创新可视化方式，提升数据解读效率
- **高级音频合成**：基于Web Audio API实现复杂的多音色音乐合成，模拟真实乐器音色，提供高质量音乐疗愈体验
- **完善的隐私保护**：建立了严格的个人信息保护机制，遵循相关法律法规，保障用户数据安全
- **模块化架构**：应用采用高度模块化的架构设计，便于后续功能扩展和维护

### 2. 应用价值
- **情绪自我管理**：通过持续的情绪记录和分析，帮助用户更好地了解自己的情绪模式，提升情绪自我调节能力
- **注意力提升**：提供注意力监测、分析和训练功能，帮助用户提高专注力和工作学习效率
- **多元化心理放松**：结合音乐疗愈、冥想音频和呼吸训练等多种方式，为用户提供全方位的心理放松解决方案
- **数据驱动洞察**：基于收集的数据提供个性化的心理健康洞察和建议，帮助用户做出更明智的自我管理决策
- **非侵入式干预**：采用非药物、非侵入式的干预方法，提供安全、便捷的心理健康支持
- **预防性健康管理**：通过持续监测和早期干预，帮助用户预防潜在的心理健康问题

"心晴屿"平台通过整合先进的脑机接口技术、数据分析能力和多元化的心理干预手段，构建了一个全面的心理健康监测与管理生态系统，致力于帮助用户实现情绪平衡、注意力提升和心理健康水平的整体改善。